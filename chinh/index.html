<!DOCTYPE html 
PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<link rel="icon" type="image/png" href="image/favicon.ico">
	<title>20/10 vui v·∫ª nh√°</title>    
    <link type="text/css" rel="stylesheet" href="./renxi/default.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
	<script type="text/javascript" src="./renxi/jquery.min.js"></script>
	<script type="text/javascript" src="./renxi/jscex.min.js"></script>
	<script type="text/javascript" src="./renxi/jscex-parser.js"></script>
	<script type="text/javascript" src="./renxi/jscex-jit.js"></script>
	<script type="text/javascript" src="./renxi/jscex-builderbase.min.js"></script>
	<script type="text/javascript" src="./renxi/jscex-async.min.js"></script>
	<script type="text/javascript" src="./renxi/jscex-async-powerpack.min.js"></script>
	<script type="text/javascript" src="./renxi/functions.js" charset="utf-8"></script>
    <script type="text/javascript" src="./renxi/love.js" charset="utf-8"></script>
    <style>
        #hiddenDiv {
          display: none;
        }

        /* Intro to√†n m√†n h√¨nh */
        #intro {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: #fff;
          display: flex;
          justify-content: center;
          align-items: center;
          flex-direction: column;
          z-index: 9999;
        }

        #intro-text {
          font-family: 'Comic Sans MS', cursive;
          font-size: 40px;
          color: #e91e63;
          text-align: center;
        }
    </style>

</head>

<body>
    <!-- Intro hi·ªáu ·ª©ng ch·ªØ -->
    <div id="intro">
        <h1 id="intro-text"></h1>
    </div>

    <div id="hiddenDiv"></div>
    <audio id="myAudio">
        <source src="./music/nhac.mp3" type="audio/mpeg">
    </audio>
    <div id="wrap">
        <div id="text" style="font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif ;">
        </div>
        <div class="box-santa">
            <div class="santa-container">
                <div class="box-noel-gif"></div>
                <div class="box-gift">
                    <div class="gift-bottom"></div>
                    <div class="gift-top"></div>
                    <div class="box-fastener">
                        <div class="fastener1"></div>
                        <div class="fastener2"></div>
                    </div>
                    <div class="content"></div>
                </div>
                <div class="box-content">
                    <i class="fa-solid fa-xmark"></i>
                    <div class="content1">
                        <div class="content-text">
                            <div class="text1">
                                <p id="text1">2024!</p>
                            </div>
                            <div class="text2">
                                <h2 id="text2">Nh√¢n d·ªãp ng√†y 8/3, ch√∫c c√°c ch·ªã em lu√¥n vui v·∫ª gƒÉÃ£p nhi√™ÃÄu may m·∫Øn, h·∫°nh phuÃÅc v√† nh·ªØng ƒëi·ªÅu tuy·ªát v∆°ÃÄi trong cu·ªôc s·ªëng!</h2>
                                <h2 id="text3">Ch√∫c c√°c ch·ªã em lu√¥n duy√™n d√°ng v√† xinh ƒë·∫πp trong m·∫Øt m·ªôt n·ª≠a th·∫ø gi·ªõi c√≤n l·∫°i. Ch√∫c m·ª´ng ng√†y c·ªßa c√°c n√†ng!</h2>
                            </div>
                        </div>
                        <div class="image-decorate">
                            <div class="pineTree">
                                <img src="https://i.pinimg.com/originals/dd/bf/00/ddbf00d0dbaea8814cca8cc19796fd8e.gif" alt="">
                            </div>
                            <div class="bell">
                                <img src="https://i.pinimg.com/originals/b2/b8/74/b2b874f5acecbbee0d94635d3ef70c31.gif" alt="">
                            </div>
                            <div class="snowman">
                                <img src="https://i.pinimg.com/originals/25/68/7e/25687e30fa47dc8dcc4cc7b9959d775a.gif" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="image-santa-content">
                        <img src="https://i.pinimg.com/originals/81/76/00/8176001689827fccb19481f75c70b25e.gif" alt="">
                    </div>
                    <div class="image-santa-content-1">
                        <img src="https://i.pinimg.com/originals/57/61/5b/57615b8c0092a66c1d4058b1692955cc.gif" alt="">
                    </div>
                </div>
                <div class="shadow-boxGift"></div>
            </div>
        </div>
        <div id="clock-box">
            <span class="STYLE1"></span><font color="#FF0000">sang dev ch√∫c b·∫°n 20 th√°ng 10 vui v·∫ª nh√°</font>
            <div id="clock"></div>
        </div>
        <canvas id="canvas" width="1100" height="680"></canvas>
    </div>

<script>
// === Hi·ªáu ·ª©ng Intro g√µ t·ª´ng ch·ªØ ===
const introText = "Hello Ng·ªçc √Ånh 20/10 vui v·∫ª üíñ";
let idx = 0;
const speed = 100;

function typeIntro() {
    if (idx < introText.length) {
        document.getElementById("intro-text").innerHTML += introText.charAt(idx);
        idx++;
        setTimeout(typeIntro, speed);
    } else {
        // khi g√µ xong th√¨ m·ªù d·∫ßn v√† b·∫Øt ƒë·∫ßu animation ch√≠nh
        setTimeout(() => {
            $("#intro").fadeOut(1000, function () {
                $(this).remove();
                startMainAnimation();
            });
        }, 1000);
    }
}

window.onload = function() {
    typeIntro();
};

// === B·ªçc to√†n b·ªô code g·ªëc v√†o h√†m n√†y ===
function startMainAnimation() {
(function(){
    var canvas = $('#canvas');
		
    if (!canvas[0].getContext) {
        $("#error").show();
        return false;        
    }

    var width = canvas.width();
    var height = canvas.height();        
    canvas.attr("width", width);
    canvas.attr("height", height);
    var opts = {
        seed: {
            x: width / 2 - 20,
            color: "rgb(190, 26, 37)",
            scale: 2
        },
        branch: [
            [535, 680, 570, 250, 500, 200, 30, 100, [
                [540, 500, 455, 417, 340, 400, 13, 100, [
                    [450, 435, 434, 430, 394, 395, 2, 40]
                ]],
                [550, 445, 600, 356, 680, 345, 12, 100, [
                    [578, 400, 648, 409, 661, 426, 3, 80]
                ]],
                [539, 281, 537, 248, 534, 217, 3, 40],
                [546, 397, 413, 247, 328, 244, 9, 80, [
                    [427, 286, 383, 253, 371, 205, 2, 40],
                    [498, 345, 435, 315, 395, 330, 4, 60]
                ]],
                [546, 357, 608, 252, 678, 221, 6, 100, [
                    [590, 293, 646, 277, 648, 271, 2, 80]
                ]]
            ]] 
        ],
        bloom: {
            num: 700,
            width: 1080,
            height: 650,
        },
        footer: {
            width: 1200,
            height: 5,
            speed: 10,
        }
    }

    var tree = new Tree(canvas[0], width, height, opts);
    var seed = tree.seed;
    var foot = tree.footer;
    var hold = 1;

    canvas.click(function(e) {
        var rect = canvas[0].getBoundingClientRect();
        var scaleX = rect.width / canvas[0].width;
        var scaleY = rect.height / canvas[0].height;
        var x = (e.clientX - rect.left) / scaleX;
        var y = (e.clientY - rect.top)  / scaleY;
        if (seed.hover(x, y)) {
            hold = 0; 
            canvas.unbind("click");
            canvas.unbind("mousemove");
            canvas.removeClass('hand');
        }
    }).mousemove(function(e){
        var rect = canvas[0].getBoundingClientRect();
        var scaleX = rect.width / canvas[0].width;
        var scaleY = rect.height / canvas[0].height;
        var x = (e.clientX - rect.left) / scaleX;
        var y = (e.clientY - rect.top)  / scaleY;
        canvas.toggleClass('hand', seed.hover(x, y));
    });

    var seedAnimate = eval(Jscex.compile("async", function () {
        seed.draw();
        while (hold) {
            $await(Jscex.Async.sleep(10));
        }
        while (seed.canScale()) {
            seed.scale(0.95);
            $await(Jscex.Async.sleep(10));
        }
        while (seed.canMove()) {
            seed.move(0, 2);
            foot.draw();
            $await(Jscex.Async.sleep(10));
        }
    }));

    var growAnimate = eval(Jscex.compile("async", function () {
        do {
            tree.grow();
            $await(Jscex.Async.sleep(10));
        } while (tree.canGrow());
    }));

    var flowAnimate = eval(Jscex.compile("async", function () {
        do {
            tree.flower(2);
            $await(Jscex.Async.sleep(10));
        } while (tree.canFlower());
    }));

    var moveAnimate = eval(Jscex.compile("async", function () {
        tree.snapshot("p1", 240, 0, 610, 680);
        while (tree.move("p1", 500, 0)) {
            foot.draw();
            $await(Jscex.Async.sleep(10));
        }
        foot.draw();
        tree.snapshot("p2", 500, 0, 610, 680);

        canvas.parent().css("background", "url(" + tree.toDataURL('image/png') + ")");
        canvas.css("background", "#ffe");
        $await(Jscex.Async.sleep(300));
        canvas.css("background", "none");
    }));

    var jumpAnimate = eval(Jscex.compile("async", function () {
        var ctx = tree.ctx;
        while (true) {
            tree.ctx.clearRect(0, 0, width, height);
            tree.jump();
            foot.draw();
            $await(Jscex.Async.sleep(25));
        }
    }));

    var textAnimate = eval(Jscex.compile("async", function () {
        var together = new Date();
        together.setFullYear(2018,2 , 8); 			
        together.setHours(0);							
        together.setMinutes(0);				
        together.setSeconds(0);					
        together.setMilliseconds(0);

        $("#code").show().typewriter();
        $("#clock-box").fadeIn(500);
        while (true) {
            timeElapse(together);
            $await(Jscex.Async.sleep(1000));
        }
    }));

    var runAsync = eval(Jscex.compile("async", function () {
        $await(seedAnimate());
        $await(growAnimate());
        $await(flowAnimate());
        $await(moveAnimate());

        textAnimate().start();

        $await(jumpAnimate());
    }));

    runAsync().start();
})();
}
</script>

<script type="text/javascript" src="./renxi/app.js" charset="utf-8"></script>

<!-- === B·∫ÆT BU·ªòC XOAY NGANG M√ÄN H√åNH === -->
<style>
#rotateDevice {
  display: none;
  position: fixed;
  z-index: 99999;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: #fff;
  color: #e91e63;
  font-family: 'Comic Sans MS', cursive;
  font-size: 26px;
  text-align: center;
  padding: 30px;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}

#rotateDevice img {
  width: 120px;
  height: auto;
  margin-top: 20px;
  animation: rotatePhone 2s infinite linear;
}

@keyframes rotatePhone {
  0% { transform: rotate(0deg); }
  50% { transform: rotate(90deg); }
  100% { transform: rotate(0deg); }
}
</style>

<div id="rotateDevice">
  <p>üì± Vui l√≤ng xoay ngang m√†n h√¨nh ƒë·ªÉ xem n·ªôi dung ƒë·∫πp h∆°n üíñ</p>
  <img src="https://cdn-icons-png.flaticon.com/512/1250/1250615.png" alt="Rotate Phone">
</div>

<script>
function checkOrientation() {
  const rotateDiv = document.getElementById('rotateDevice');
  if (window.innerHeight > window.innerWidth) {
    rotateDiv.style.display = 'flex';
    document.body.style.overflow = 'hidden';
  } else {
    rotateDiv.style.display = 'none';
    document.body.style.overflow = 'auto';
  }
}
window.addEventListener('load', checkOrientation);
window.addEventListener('resize', checkOrientation);
window.addEventListener('orientationchange', checkOrientation);
</script>

</body>
</html>
